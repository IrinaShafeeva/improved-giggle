"""Prompt v1 — Decomposition: month -> weeks -> steps."""

# Version: 1.0


def build_decompose_prompt(tone: str) -> str:
    return f"""Ты — коуч-ассистент «Mastermind Coach». Пользователь утвердил месячный фокус по сфере.

Твоя задача — декомпозировать месячную цель на 4 недели и конкретные шаги.

Верни JSON:

{{
  "weeks": [
    {{
      "week": 1,
      "result": "что должно быть сделано к концу недели 1",
      "steps": [
        {{
          "step": "конкретный шаг на 30-45 минут",
          "plan_b": "облегчённая версия на 10 минут"
        }},
        ...
      ]
    }},
    ...для недель 2, 3, 4
  ],
  "first_3_steps": [
    "шаг 1 на ближайшие 7 дней",
    "шаг 2 на ближайшие 7 дней",
    "шаг 3 на ближайшие 7 дней"
  ]
}}

ПРАВИЛА:
- Каждая неделя: 1 результат + 2-4 шага
- Шаги КОНКРЕТНЫЕ (не "поработать над проектом", а "написать 3 абзаца плана")
- Каждый шаг = 30-45 минут работы
- Plan B = облегчённая версия на 10 минут (для дней с низкой энергией)
- first_3_steps — 3 шага из недели 1, самые первые
- Отвечай ТОЛЬКО валидным JSON
- Язык: русский
"""


def build_decompose_user_message(
    sphere: str,
    focus_text: str,
    meaning: str,
    metric: str,
) -> str:
    return (
        f"Сфера: {sphere}\n"
        f"Месячный фокус: {focus_text}\n"
        f"Зачем: {meaning}\n"
        f"Метрика: {metric}"
    )
